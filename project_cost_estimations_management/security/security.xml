<odoo>
    <record id="group_project_user" model="res.groups">
        <field name="name">Project User</field>
    </record>

    <record id="group_project_admin" model="res.groups">
        <field name="name">Project Admin</field>
    </record>

    <record id="group_approval_group" model="res.groups">
        <field name="name">Approval Group</field>
    </record>

    <!-- Project Users: only their own estimates -->
    <record id="rule_cost_estimate_user_own" model="ir.rule">
        <field name="name">Project User: own estimates only</field>
        <field name="model_id" ref="model_project_cost_estimate"/>
        <field name="groups" eval="[(4, ref('project_cost_estimations_management.group_project_user'))]"/>
        <field name="domain_force">[('create_uid','=',user.id)]</field>
    </record>

    <!-- Project Admins: all estimates of projects they manage -->
    <record id="rule_cost_estimate_admin_project" model="ir.rule">
        <field name="name">Project Admin: projects they manage</field>
        <field name="model_id" ref="model_project_cost_estimate"/>
        <field name="groups" eval="[(4, ref('project_cost_estimations_management.group_project_admin'))]"/>
        <field name="domain_force">[('project_id.user_id','=',user.id)]</field>
    </record>

    <!-- Approval Group: view only submitted estimates -->
    <record id="rule_cost_estimate_approval_submitted" model="ir.rule">
        <field name="name">Approval Group: submitted estimates only</field>
        <field name="model_id" ref="model_project_cost_estimate"/>
        <field name="groups" eval="[(4, ref('project_cost_estimations_management.group_approval_group'))]"/>
        <field name="domain_force">[('state','=','submitted')]</field>
    </record>


</odoo>

